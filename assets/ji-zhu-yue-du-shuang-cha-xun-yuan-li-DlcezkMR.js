import{_ as d}from"./ValaxyMain.vue_vue_type_style_index_0_lang-DRVqeRiY.js";import{a as p,p as o,o as c,c as u,w as t,f as E,r as l,g as s,h as i}from"./app-CzjF7NIc.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-17i98rOK.js";import"./YunCard.vue_vue_type_script_setup_true_lang-Da3dkqK-.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-BsneHNVS.js";import"./index-C7yU5XnD.js";const g=s("h1",{id:"double-sql-injection-0x01-双查询",tabindex:"-1"},[i("Double_ SQL_Injection/#0x01-双查询 "),s("a",{class:"header-anchor",href:"#double-sql-injection-0x01-双查询","aria-label":'Permalink to "Double_ SQL_Injection/#0x01-双查询"'},"​")],-1),y=s("p",null,[i("原文链接："),s("a",{href:"https://mochazz.github.io/2017/09/23/Double_%20SQL_Injection/#0x01-%E5%8F%8C%E6%9F%A5%E8%AF%A2",target:"_blank",rel:"noreferrer"},"Double SQL Injection(双查询注入) | Mochazz’s blog")],-1),m=s("h2",{id:"笔记",tabindex:"-1"},[i("笔记 "),s("a",{class:"header-anchor",href:"#笔记","aria-label":'Permalink to "笔记"'},"​")],-1),_=s("p",null,[i("： 0x3a是"),s("code",null,":")],-1),F=s("p",null,"注入sample：",-1),f=s("div",{class:"language-sql vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sql"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"select"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," count"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),concact(("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"injection"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"floor"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"rand"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")a "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," <target-table>"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," group by"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"--+")])])]),s("button",{class:"collapse"})],-1),b=s("p",null,"爆表",-1),C=s("div",{class:"language-sql vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sql"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"select"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," count"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),concact(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"select"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," table_name "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," information_schema"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"tables"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," where"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," table_schema"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'security'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"floor"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"rand"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")a")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," information_schema"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"column"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"group by"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a")])])]),s("button",{class:"collapse"})],-1),v=s("h3",{id:"语法讲解",tabindex:"-1"},[i("语法讲解 "),s("a",{class:"header-anchor",href:"#语法讲解","aria-label":'Permalink to "语法讲解"'},"​")],-1),D=s("p",null,[s("strong",null,"concact()a")],-1),A=s("p",null,[s("code",null,"concact"),i(" 本身是用于将里面的参数全部连接起来")],-1),B=s("div",{class:"language-sql vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sql"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"select"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," concact()a ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等价于")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"select"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," concact() "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"as"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a")])])]),s("button",{class:"collapse"})],-1),$=s("h3",{id:"原理",tabindex:"-1"},[i("原理： "),s("a",{class:"header-anchor",href:"#原理","aria-label":'Permalink to "原理："'},"​")],-1),j=s("p",null,[s("code",null,"floor(rand(0)*2)"),i(" 可以用floor和rand(0)的配合取消rand的随机性，导致每次组合运行时都会特点输出01101。")],-1),q=s("p",null,[s("code",null,"group by"),i("遇到"),s("code",null,"count"),i(" 会创建一个虚拟表，而group by的查询到的对象不在虚拟表中，则会插入一条数据，有则会调用count进行计数+1")],-1),x=s("p",null,[s("code",null,"group by"),i(" 默认遇到"),s("code",null,"rand"),i(" 在插入group by 的虚拟表中，会再进行一次rand计算。")],-1),z=s("p",null,"所以导致：",-1),I=s("p",null,[s("code",null,"011011")],-1),L=s("p",null,"第一次 0：",-1),S=s("p",null,[i("虚拟表中没有，由于"),s("code",null,"count"),i(" 特性准备插入，")],-1),T=s("p",null,[i("再由于"),s("code",null,"group by"),i(" ,又运行了一次rand，导致插入的数字为 1")],-1),P=s("p",null,"第三次 0：",-1),w=s("p",null,[i("同理，在虚拟表中没有0，由于由于"),s("code",null,"count"),i(" 特性准备插入，")],-1),Q=s("p",null,[i("再由于"),s("code",null,"group by"),i(" ,又运行了一次rand，导致插入")],-1),N=s("p",null,"但是，数字1 作为键已经存在，",-1),V=s("p",null,"此时会报错",-1),W={__name:"ji-zhu-yue-du-shuang-cha-xun-yuan-li",setup(M,{expose:k}){const e=JSON.parse('{"title":"[技术阅读]双查询原理","description":"","frontmatter":{"title":"[技术阅读]双查询原理","date":"2021-07-28T13:39:07.000Z","tags":["技术阅读","知识点巩固"],"published":true,"hideInList":false,"feature":null,"isTop":false},"headers":[{"level":2,"title":"笔记","slug":"笔记","link":"#笔记","children":[{"level":3,"title":"语法讲解","slug":"语法讲解","link":"#语法讲解","children":[]},{"level":3,"title":"原理：","slug":"原理","link":"#原理","children":[]}]}],"relativePath":"pages/posts/history/ji-zhu-yue-du-shuang-cha-xun-yuan-li.md","path":"/home/runner/work/1dayluo.github.io/1dayluo.github.io/pages/posts/history/ji-zhu-yue-du-shuang-cha-xun-yuan-li.md","lastUpdated":1714218709000}'),h=p(),n=e.frontmatter||{};return h.meta.frontmatter=Object.assign(h.meta.frontmatter||{},e.frontmatter||{}),o("pageData",e),o("valaxy:frontmatter",n),globalThis.$frontmatter=n,k({frontmatter:{title:"[技术阅读]双查询原理",date:"2021-07-28T13:39:07.000Z",tags:["技术阅读","知识点巩固"],published:!0,hideInList:!1,feature:null,isTop:!1}}),(a,Z)=>{const r=d;return c(),u(r,{frontmatter:E(n)},{"main-content-md":t(()=>[g,y,m,_,F,f,b,C,v,D,A,B,$,j,q,x,z,I,L,S,T,P,w,Q,N,V]),"main-header":t(()=>[l(a.$slots,"main-header")]),"main-header-after":t(()=>[l(a.$slots,"main-header-after")]),"main-nav":t(()=>[l(a.$slots,"main-nav")]),"main-content":t(()=>[l(a.$slots,"main-content")]),"main-content-after":t(()=>[l(a.$slots,"main-content-after")]),"main-nav-before":t(()=>[l(a.$slots,"main-nav-before")]),"main-nav-after":t(()=>[l(a.$slots,"main-nav-after")]),comment:t(()=>[l(a.$slots,"comment")]),footer:t(()=>[l(a.$slots,"footer")]),aside:t(()=>[l(a.$slots,"aside")]),"aside-custom":t(()=>[l(a.$slots,"aside-custom")]),default:t(()=>[l(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{W as default};
